#ifndef _TERMIOS_H
#define _TERMIOS_H

#define TTY_BUF_SIZE 1024	// tty ?��???????????

/* 0x54 is just a magic number to make these relatively uniqe ('T') */
/* 0x54 ??????????????????????��????��?('T') */

// tty ?��??ioctl ??????????ioctl ????????????��???��?
// ????????TC[*]???????tty ????????
// ???????termios ???��????(?��?tcgetattr())??
#define TCGETS 0x5401
// ??????????termios ???��????(?��?tcsetattr()??TCSANOW)??
#define TCSETS 0x5402
// ?????????termios ??????????????????????????????????????(???)????????????
// ??????????????????????????????(?��?tcsetattr()??TCSADRAIN ???)??
#define TCSETSW 0x5403
// ??????termios ?????????????????????????????????????????????(???)??????��?
// ????????��?tcsetattr()??TCSAFLUSH ?????
#define TCSETSF 0x5404
// ???????termio ???��????(?��?tcgetattr())??
#define TCGETA 0x5405
// ??????????termio ???��????(?��?tcsetattr()??TCSANOW ???)??
#define TCSETA 0x5406
// ?????????termio ??????????????????????????????????????(???)????????????
// ??????????????????????????????(?��?tcsetattr()??TCSADRAIN ???)??
#define TCSETAW 0x5407
// ??????termio ?????????????????????????????????????????????(???)??????��?
// ????????��?tcsetattr()??TCSAFLUSH ?????
#define TCSETAF 0x5408
// ?????????��??????(??)????????????0?????????break???��?tcsendbreak()??tcdrain()????
#define TCSBRK 0x5409
// ???/?????????????????0?????????????????1??????????????????????????2???????
// ?????????3?????????????????????��?tcflow()????
#define TCXONC 0x540A
//?????��??????????????????????��???????????????0???????(???)??????��??????1??
// ???????????��??????2??????????????????��??��?tcflush()????
#define TCFLSH 0x540B
// ????????TIOC[*]???????tty ???????????????
// ????????????��???????
#define TIOCEXCL 0x540C
// ??��????????��???????
#define TIOCNXCL 0x540D
// ????tty ?????????(TIOCNOTTY - ???tty ????????)??
#define TIOCSCTTY 0x540E
// ??????????��???????id(?��?tcgetpgrp())??
#define TIOCGPGRP 0x540F
// ???????????��???????id(?��?tcsetpgrp())??
#define TIOCSPGRP 0x5410
// ????????????��?��????????????
#define TIOCOUTQ 0x5411
// ????????????????????????????????????????????????????????????????????????
// ?????????????��????????????��?????????
#define TIOCSTI 0x5412
// ???????��?????��??????��?winsize ??????
#define TIOCGWINSZ 0x5413
// ????????��?????��??????��?winsize ??????
#define TIOCSWINSZ 0x5414
// ????modem ???????????????????��????????��?????185-196 ?��???
#define TIOCMGET 0x5415
// ???????modem ?????????????(true ??false)(Individual control line Set)??
#define TIOCMBIS 0x5416
// ??��????modem ?????????????(Individual control line clear)??
#define TIOCMBIC 0x5417
// ????modem ????????????????????��??��????modem ?????????????????��??
#define TIOCMSET 0x5418
// ???????????????(1 - ??????0 - ???)??
// ?????????????????????��???????????????????????????modem ??��???????��??
// ????????????????????ioctl ?????tty ??��???????O_NDELAY ???????????open()
// ????????????
#define TIOCGSOFTCAR 0x5419
// ????????????????(1 - ??????0 - ???)??
#define TIOCSSOFTCAR 0x541A
// ????????????��?��?????????????
#define TIOCINQ 0x541B

// ?????��(Window size)????????????????��???????????????��???
// ioctls ?��?TIOCGWINSZ ??TIOCSWINSZ ?????????????????��?????
struct winsize
{
  unsigned short ws_row;	// ?????????????
  unsigned short ws_col;	// ?????????????
  unsigned short ws_xpixel;	// ???????????????
  unsigned short ws_ypixel;	// ??????????????
};

// AT&T ??V ??termio ????
#define NCC 8			// termio ???��???????????????
struct termio
{
  unsigned short c_iflag;	/* input mode flags */// ???????????
  unsigned short c_oflag;	/* output mode flags */// ??????????
  unsigned short c_cflag;	/* control mode flags */// ???????????
  unsigned short c_lflag;	/* local mode flags */// ???????????
  unsigned char c_line;		/* line discipline */// ??��???????????
  unsigned char c_cc[NCC];	/* control characters */// ??????????�
};

// POSIX ??termios ????
#define NCCS 17			// termios ???��???????????????
struct termios
{
  unsigned long c_iflag;	/* input mode flags */// ???????????
  unsigned long c_oflag;	/* output mode flags */// ??????????
  unsigned long c_cflag;	/* control mode flags */// ???????????
  unsigned long c_lflag;	/* local mode flags */// ???????????
  unsigned char c_line;		/* line discipline */// ??��???????????
  unsigned char c_cc[NCCS];	/* control characters */// ??????????�
};

/* c_cc characters *//* c_cc ?????��???? */
// ??????c_cc ??????????????????
#define VINTR 0			// c_cc[VINTR] = INTR (^C)??\003???��??????
#define VQUIT 1			// c_cc[VQUIT] = QUIT (^\)??\034??????????
#define VERASE 2		// c_cc[VERASE] = ERASE (^H)??\177???????????
#define VKILL 3			// c_cc[VKILL] = KILL (^U)??\025??????????
#define VEOF 4			// c_cc[VEOF] = EOF (^D)??\004??????????????
#define VTIME 5			// c_cc[VTIME] = TIME (\0)??\0?? ??????(?��????????)??
#define VMIN 6			// c_cc[VMIN] = MIN (\1)??\1?? ????????
#define VSWTC 7			// c_cc[VSWTC] = SWTC (\0)??\0?? ?????????
#define VSTART 8		// c_cc[VSTART] = START (^Q)??\021??????????
#define VSTOP 9			// c_cc[VSTOP] = STOP (^S)??\023?????????
#define VSUSP 10		// c_cc[VSUSP] = SUSP (^Z)??\032???????????
#define VEOL 11			// c_cc[VEOL] = EOL (\0)??\0?? ?��????????
#define VREPRINT 12		// c_cc[VREPRINT] = REPRINT (^R)??\022????????????
#define VDISCARD 13		// c_cc[VDISCARD] = DISCARD (^O)??\017???????????
#define VWERASE 14		// c_cc[VWERASE] = WERASE (^W)??\027??????????????
#define VLNEXT 15		// c_cc[VLNEXT] = LNEXT (^V)??\026????????????
#define VEOL2 16		// c_cc[VEOL2] = EOL2 (\0)??\0?? ?��???2??

/* c_iflag bits *//* c_iflag ????�� */
// termios ???????????c_iflag ????????????????
#define IGNBRK 0000001		// ?????????BREAK ??????
#define BRKINT 0000002		// ??BREAK ?????SIGINT ????
#define IGNPAR 0000004		// ???????��????????????
#define PARMRK 0000010		// ??????��?????
#define INPCK 0000020		// ???????????��?�
#define ISTRIP 0000040		// ?????????8 ��??
#define INLCR 0000100		// ??????????��?NL ????????CR??
#define IGNCR 0000200		// ????????CR??
#define ICRNL 0000400		// ??????????????CR ??????��?NL??
#define IUCLC 0001000		// ???????????��????????����?????
#define IXON 0002000		// ???????/????XON/XOFF??????????
#define IXANY 0004000		// ?????��?????????????
#define IXOFF 0010000		// ???????/????XON/XOFF??????????
#define IMAXBEL 0020000		// ?????????????�^

/* c_oflag bits *//* c_oflag ????�� */
// termios ????????????c_oflag ????????????????
#define OPOST 0000001		// ????????????
#define OLCUC 0000002		// ????????����?????????��?????
#define ONLCR 0000004		// ???????????��?NL ??????-???��?CR-NL??
#define OCRNL 0000010		// ?????????????CR ??????��?NL??
#define ONOCR 0000020		// ??0 ?��?????????CR??
#define ONLRET 0000040		// ???��?NL ??��??????????
#define OFILL 0000100		// ???????????????????????????
#define OFDEL 0000200		// ????????ASCII ??DEL?????��??????????ASCII NULL??
#define NLDLY 0000400		// ?????????
#define NL0 0000000		// ???????????0??
#define NL1 0000400		// ???????????1??
#define CRDLY 0003000		// ?????????
#define CR0 0000000		// ??????????0??
#define CR1 0001000		// ??????????1??
#define CR2 0002000		// ??????????2??
#define CR3 0003000		// ??????????3??
#define TABDLY 0014000		// ????????????
#define TAB0 0000000		// ????????????0??
#define TAB1 0004000		// ????????????1??
#define TAB2 0010000		// ????????????2??
#define TAB3 0014000		// ????????????3??
#define XTABS 0014000		// ???????TAB ??????????????????
#define BSDLY 0020000		// ??????????
#define BS0 0000000		// ??????????0??
#define BS1 0020000		// ??????????1??
#define VTDLY 0040000		// ???????????
#define VT0 0000000		// ??????????????0??
#define VT1 0040000		// ??????????????1??
#define FFDLY 0040000		// ????????
#define FF0 0000000		// ??????????0??
#define FF1 0040000		// ??????????1??

/* c_cflag bit meaning *//* c_cflag ????��????? */
// termios ???��???????????c_cflag ?????????????8 ??????????
#define CBAUD 0000017		// ????????��??????
#define B0 0000000 /* hang up */	/* ?????�� */
#define B50 0000001		// ?????? 50??
#define B75 0000002		// ?????? 75??
#define B110 0000003		// ?????? 110??
#define B134 0000004		// ?????? 134??
#define B150 0000005		// ?????? 150??
#define B200 0000006		// ?????? 200??
#define B300 0000007		// ?????? 300??
#define B600 0000010		// ?????? 600??
#define B1200 0000011		// ?????? 1200??
#define B1800 0000012		// ?????? 1800??
#define B2400 0000013		// ?????? 2400??
#define B4800 0000014		// ?????? 4800??
#define B9600 0000015		// ?????? 9600??
#define B19200 0000016		// ?????? 19200??
#define B38400 0000017		// ?????? 38400??
#define EXTA B19200		// ?????????A??
#define EXTB B38400		// ?????????B??
#define CSIZE 0000060		// ???��??????????
#define CS5 0000000		// ????5 ????��??
#define CS6 0000020		// ????6 ????��??
#define CS7 0000040		// ????7 ????��??
#define CS8 0000060		// ????8 ????��??
#define CSTOPB 0000100		// ??????????��????????1 ????
#define CREAD 0000200		// ?????????
#define CPARENB 0000400		// ???????????????��??????????????��?�
#define CPARODD 0001000		// ????/????��??????��?�
#define HUPCL 0002000		// ????????????
#define CLOCAL 0004000		// ???????????(modem)??????��??
#define CIBAUD 03600000 /* input baud rate (not used) */	/* ????????(��???) */
#define CRTSCTS 020000000000 /* flow control */	/* ?????? */

#define PARENB CPARENB		// ???????????????��??????????????��?�
#define PARODD CPARODD		// ????/????��??????��?�

/* c_lflag bits *//* c_lflag ????�� */
// termios ???��???????????c_lflag ??????????
#define ISIG 0000001		// ????????INTR??QUIT??SUSP ??DSUSP???????????????
#define ICANON 0000002		// ?????�Z????????????
#define XCASE 0000004		// ????????ICANON??????????��??????
#define ECHO 0000010		// ?????????????
#define ECHOE 0000020		// ????????ICANON????ERASE/WERASE ???????????/?????
#define ECHOK 0000040		// ????????ICANON????KILL ?????????????��?
#define ECHONL 0000100		// ????????ICANON?????ECHO ??��????????NL ?????
#define NOFLSH 0000200		// ??????SIGINT ??SIGQUIT ???????????????????��???
// ????SIGSUSP ???????????????��?
#define TOSTOP 0000400		// ????SIGTTOU ????????????????�?��?????????��
// ????????????
#define ECHOCTL 0001000		// ????????ECHO?????TAB??NL??START ??STOP ?????ASCII
// ?????????????????^X ?????X ???????+0x40??
#define ECHOPRT 0002000		// ????????ICANON ??IECHO????????????????????
#define ECHOKE 0004000		// ????????ICANON????KILL ??????????????????????????
#define FLUSHO 0010000		// ????????????????DISCARD ????????????????
#define PENDIN 0040000		// ????????????????????????��?????????????????
#define IEXTEN 0100000		// ?????????????????????

/* modem lines *//* modem ??��????????? */
#define TIOCM_LE 0x001		// ??��????(Line Enable)??
#define TIOCM_DTR 0x002		// ??????????(Data Terminal Ready)??
#define TIOCM_RTS 0x004		// ??????(Request to Send)??
#define TIOCM_ST 0x008		// ???????????(Serial Transfer)??[??]
#define TIOCM_SR 0x010		// ???????????(Serial Receive)??[??]
#define TIOCM_CTS 0x020		// ???????(Clear To Send)??
#define TIOCM_CAR 0x040		// ??????(Carrier Detect)??
#define TIOCM_RNG 0x080		// ??????(Ring indicate)??
#define TIOCM_DSR 0x100		// ?????��????(Data Set Ready)??
#define TIOCM_CD TIOCM_CAR
#define TIOCM_RI TIOCM_RNG

/* tcflow() and TCXONC use these *//* tcflow()??TCXONC ?????��??????? */
#define TCOOFF 0		// ?????????
#define TCOON 1			// ????????????????
#define TCIOFF 2		// ?????????STOP ???????��???????????????
#define TCION 3			// ?????????START ???????��????????????????

/* tcflush() and TCFLSH use these *//* tcflush()??TCFLSH ?????��??????? */
#define TCIFLUSH 0		// ???????????????????
#define TCOFLUSH 1		// ????��??????????????
#define TCIOFLUSH 2		// ???????????????????????��??????????????

/* tcsetattr uses these *//* tcsetattr()?????��??????? */
#define TCSANOW 0		// ?????????????
#define TCSADRAIN 1		// ???????????��??????????????????
#define TCSAFLUSH 2		// ???????????��?????????????????????��??????
// ????��????????????????????

typedef int speed_t;		// ??????????????

// ????termios_p ???termios ???��??????????
extern speed_t cfgetispeed (struct termios *termios_p);
// ????termios_p ???termios ???��??????????
extern speed_t cfgetospeed (struct termios *termios_p);
// ??termios_p ???termios ???��??????????????speed??
extern int cfsetispeed (struct termios *termios_p, speed_t speed);
// ??termios_p ???termios ???��??????????????speed??
extern int cfsetospeed (struct termios *termios_p, speed_t speed);
// ???fildes ?????????��????????????????
extern int tcdrain (int fildes);
// ????/????fildes ????????????????????
extern int tcflow (int fildes, int action);
// ????fildes ?????????????��???????????????????????????��?????????
extern int tcflush (int fildes, int queue_selector);
// ???????fildes ???????????????????????termios_p ?????????
extern int tcgetattr (int fildes, struct termios *termios_p);
// ??????????????????????????????????????????????0 ?????��??
extern int tcsendbreak (int fildes, int duration);
// ???termios ?????termios_p ????????????????????????????
extern int tcsetattr (int fildes, int optional_actions,
		      struct termios *termios_p);

#endif
